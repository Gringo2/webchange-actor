<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="500" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#999" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="500" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">SWIM System Architecture</text>
  
  <!-- Nodes -->
  <!-- Input -->
  <rect x="50" y="100" width="150" height="60" rx="10" fill="#007bff" stroke="#0056b3" stroke-width="2" />
  <text x="125" y="135" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle">Actor Input (Zod)</text>
  
  <!-- Fetcher -->
  <rect x="250" y="100" width="150" height="60" rx="10" fill="#28a745" stroke="#1e7e34" stroke-width="2" />
  <text x="325" y="130" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle">Cheerio Fetcher</text>
  <text x="325" y="145" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">(Proxy-Aware)</text>
  
  <!-- Preprocessor -->
  <rect x="450" y="100" width="150" height="60" rx="10" fill="#17a2b8" stroke="#117a8b" stroke-width="2" />
  <text x="525" y="135" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle">Preprocessor</text>
  
  <!-- Storage -->
  <rect x="250" y="220" width="150" height="60" rx="10" fill="#ffc107" stroke="#d39e00" stroke-width="2" />
  <text x="325" y="255" font-family="Arial, sans-serif" font-size="14" fill="#333" text-anchor="middle">KVS History / State</text>
  
  <!-- Diff Engine -->
  <rect x="450" y="220" width="150" height="60" rx="10" fill="#dc3545" stroke="#a71d2a" stroke-width="2" />
  <text x="525" y="250" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle">LCS Diff Engine</text>
  <text x="525" y="265" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">(Semantic Match)</text>
  
  <!-- Logic Core -->
  <rect x="50" y="340" width="150" height="120" rx="10" fill="#6c757d" stroke="#495057" stroke-width="2" />
  <text x="125" y="365" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Intelligence Layer</text>
  <text x="125" y="390" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Classifier</text>
  <text x="125" y="410" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Scorer</text>
  <text x="125" y="430" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Deduplicator</text>
  
  <!-- Outputs -->
  <rect x="350" y="340" width="410" height="120" rx="10" fill="white" stroke="#ddd" stroke-dasharray="5,5" />
  <text x="555" y="330" font-family="Arial, sans-serif" font-size="14" fill="#666" text-anchor="middle">Notification &amp; Output</text>
  
  <rect x="370" y="360" width="110" height="40" rx="5" fill="#6610f2" />
  <text x="425" y="385" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Slack (Rich)</text>
  
  <rect x="495" y="360" width="110" height="40" rx="5" fill="#e83e8c" />
  <text x="550" y="385" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">AI Analysis</text>
  
  <rect x="620" y="360" width="110" height="40" rx="5" fill="#fd7e14" />
  <text x="675" y="385" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Visual Proof</text>
  
  <!-- Arrows -->
  <line x1="200" y1="130" x2="240" y2="130" stroke="#999" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="400" y1="130" x2="440" y2="130" stroke="#999" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="525" y1="160" x2="525" y2="210" stroke="#999" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="325" y1="160" x2="325" y2="210" stroke="#999" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="450" y1="250" x2="410" y2="250" stroke="#999" stroke-width="2" marker-end="url(#arrowhead)" />
  <path d="M 525,280 L 525,400 L 210,400" stroke="#999" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
</svg>
